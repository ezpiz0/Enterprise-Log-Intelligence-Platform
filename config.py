"""
=============================================================================
config.py - Конфигурационный файл проекта
=============================================================================

Этот модуль содержит все константы и настройки, используемые в приложении
для анализа логов. Централизация настроек упрощает изменение параметров
и поддержку кода.

Автор: Команда Atomichack 3.0
Дата: 2025
=============================================================================
"""

# =============================================================================
# НАСТРОЙКИ БАЗЫ ЗНАНИЙ
# =============================================================================

# Базовое имя файла с базой знаний (без расширения)
KB_BASE_FILENAME = "anomalies_problems"

# Поддерживаемые форматы файлов базы знаний
# Система будет искать файл с любым из этих расширений
KB_SUPPORTED_EXTENSIONS = ['.csv', '.xlsx', '.xls']

# Устаревшая константа для обратной совместимости
KB_FILENAME = "anomalies_problems.csv"


# =============================================================================
# НАСТРОЙКИ МАШИННОГО ОБУЧЕНИЯ
# =============================================================================

# Легкая модель для быстрого анализа (около 80M параметров)
# Преимущества: быстрая загрузка, низкие требования к памяти
# Недостатки: немного ниже точность сопоставления
LIGHT_MODEL = 'sentence-transformers/all-MiniLM-L6-v2'

# Тяжелая модель для точного анализа (около 600M параметров)
# Преимущества: высокая точность эмбеддингов, лучше для сложных случаев
# Недостатки: медленная загрузка, больше требований к памяти
HEAVY_MODEL = 'Qwen/Qwen3-Embedding-4B'

# Примечание: Устройство для вычислений (GPU/CPU) определяется автоматически
# При наличии CUDA-совместимого GPU используется 'cuda', иначе - 'cpu'
# Функция автоматического определения находится в processing/ml_analysis.py


# =============================================================================
# ПОРОГИ СХОЖЕСТИ ДЛЯ СОПОСТАВЛЕНИЯ
# =============================================================================

# Минимальная косинусная схожесть для сопоставления ERROR-логов с проблемами
# Значение от 0.0 до 1.0, где 1.0 - полное совпадение
ERROR_SIMILARITY_THRESHOLD = 0.60

# Минимальная косинусная схожесть для сопоставления WARNING-логов с аномалиями
# Более низкий порог, чем для ERROR, так как WARNING могут быть более вариативными
WARNING_SIMILARITY_THRESHOLD = 0.55


# =============================================================================
# ПАРАМЕТРЫ ВРЕМЕННОГО АНАЛИЗА
# =============================================================================

# Размер контекстного окна для анализа окружающих строк лога
# Количество строк до и после целевой строки для формирования контекста
CONTEXT_WINDOW_SIZE = 5

# Временное окно для поиска новых аномалий (в минутах)
# Если WARNING появляется в пределах этого времени после известной ошибки,
# он считается потенциально связанным с ней
NOVEL_ANOMALY_WINDOW_MINUTES = 5


