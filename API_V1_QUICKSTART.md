# ‚ö° API v1 - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
# Windows:
activate-env.bat

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
python main.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8001`

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **Swagger UI:** http://localhost:8001/docs
- **ReDoc:** http://localhost:8001/redoc

---

## üîë API –ö–ª—é—á–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–ª—é—á–µ–π:
- `demo-api-key-123`
- `test-api-key-456`
- `dev-api-key-789`

---

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π ZIP —Ñ–∞–π–ª

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_logs.zip` —Å –¥–≤—É–º—è —Ñ–∞–π–ª–∞–º–∏ –≤–Ω—É—Ç—Ä–∏:

**anomalies_problems.csv** (–∏–ª–∏ .xlsx/.xls):
```csv
Severity;Description;Recommendation
ERROR;Database connection failed;Check database configuration
WARNING;High CPU usage;Monitor system resources
```
*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV, XLSX –∏–ª–∏ XLS*

**test_logs.txt:**
```
2025-10-23 10:00:00 [ERROR] Database connection failed
2025-10-23 10:00:01 [WARNING] High CPU usage detected
```

### 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É

```bash
curl -X POST "http://localhost:8001/api/v1/batch-process/?model=light" \
  -H "X-API-Key: demo-api-key-123" \
  -F "files=@test_logs.zip"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "tasks": [
    {
      "task_id": "550e8400-e29b-41d4-a716-446655440000",
      "status": "pending",
      "message": "–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —Ñ–∞–π–ª–∞ 'test_logs.zip'"
    }
  ],
  "total_files": 1,
  "queued": 1
}
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

–ó–∞–º–µ–Ω–∏—Ç–µ `TASK_ID` –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π ID:

```bash
curl -X GET "http://localhost:8001/api/v1/status/TASK_ID" \
  -H "X-API-Key: demo-api-key-123"
```

### 4. –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–∫–æ–≥–¥–∞ —Å—Ç–∞—Ç—É—Å = completed)

```bash
curl -X GET "http://localhost:8001/api/v1/download/TASK_ID" \
  -H "X-API-Key: demo-api-key-123" \
  -o results.zip
```

---

## üß™ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤:

```bash
python test_api_v1.py
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- –û—Ç–ø—Ä–∞–≤–∏—Ç –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
- –ü—Ä–æ–≤–µ—Ä–∏—Ç —Å—Ç–∞—Ç—É—Å—ã
- –°—Ä–∞–≤–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- –ü—Ä–æ–≤–µ—Ä–∏—Ç rate limiting

---

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/v1/batch-process/` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É |
| GET | `/api/v1/status/{task_id}` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ |
| GET | `/api/v1/history` | –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∞–Ω–∞–ª–∏–∑–æ–≤ |
| POST | `/api/v1/compare/` | –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| GET | `/api/v1/export/{task_id}/{format}` | –≠–∫—Å–ø–æ—Ä—Ç (json/xml/pdf) |
| GET | `/api/v1/download/{task_id}` | –°–∫–∞—á–∞—Ç—å ZIP —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ |
| DELETE | `/api/v1/result/{task_id}` | –£–¥–∞–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫** `X-API-Key` –∫ –∑–∞–ø—Ä–æ—Å–∞–º
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å** –ø–µ—Ä–µ–¥ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ light –º–æ–¥–µ–ª—å** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
4. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–∏–º–∏—Ç–∞–º–∏:** –º–∞–∫—Å–∏–º—É–º 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã?

**–û—à–∏–±–∫–∞ 401:** –î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `-H "X-API-Key: demo-api-key-123"`

**–û—à–∏–±–∫–∞ 429:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–¥–∞—á, –¥–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö

**–ó–∞–¥–∞—á–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ failed:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `error_message` –≤ `/api/v1/status/{task_id}`

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. —Ñ–∞–π–ª `API_V1_GUIDE.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∏ –ø—Ä–∏–º–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

**–ì–æ—Ç–æ–≤–æ! –ù–∞—á–Ω–∏—Ç–µ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** http://localhost:8001/docs

