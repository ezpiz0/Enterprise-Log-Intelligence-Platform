# üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ FastAPI Log Analyzer

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 –∫–æ–º–∞–Ω–¥—ã)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë (FastAPI + Prometheus + Grafana)
docker-compose up -d

# 3. –û—Ç–∫—Ä—ã—Ç—å Grafana
# http://localhost:3000 (admin/admin)
```

---

## üåê –ê–¥—Ä–µ—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| **FastAPI** | http://localhost:8001 | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| **–ú–µ—Ç—Ä–∏–∫–∏** | http://localhost:8001/metrics | Endpoint —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ |
| **Prometheus** | http://localhost:9090 | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ |
| **Grafana** | http://localhost:3000 | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (admin/admin) |

---

## üìà –ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è

### HTTP –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –≤ —Å–µ–∫—É–Ω–¥—É (RPS)
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (p50, p95, p99)
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ

### ML –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ (light/heavy)
- ‚úÖ –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤
- ‚úÖ –í—Ä–µ–º—è ML –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ (–ø–æ —ç—Ç–∞–ø–∞–º)
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (RSS, VMS)
- ‚úÖ –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤
- ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (success/error)

---

## üìä –î–∞—à–±–æ—Ä–¥ Grafana

**16 –ø–∞–Ω–µ–ª–µ–π –≤ 4 —Å–µ–∫—Ü–∏—è—Ö:**

1. **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∑–∞–ø—Ä–æ—Å—ã, –∞—Ä—Ö–∏–≤—ã, –∑–∞–ø–∏—Å–∏, WebSocket
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API** - RPS, latency
3. **ML –ê–Ω–∞–ª–∏–∑** - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∞–Ω–æ–º–∞–ª–∏–∏, –ø—Ä–æ–±–ª–µ–º—ã
4. **–†–µ—Å—É—Ä—Å—ã** - –ø–∞–º—è—Ç—å, —Ä–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–æ–≤

**–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **MONITORING_GUIDE.md** | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (200+ —Å—Ç—Ä–æ–∫) |
| **MONITORING_QUICKSTART.md** | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞) |
| **MONITORING_CHANGES.md** | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| **MONITORING_COMMANDS.txt** | –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥ |
| **‚úÖ_–ú–û–ù–ò–¢–û–†–ò–ù–ì_–ì–û–¢–û–í.md** | –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ |

---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –õ–æ–≥–∏
docker logs -f fastapi-log-analyzer

# –°—Ç–∞—Ç—É—Å
docker-compose ps
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ FastAPI
```bash
curl http://localhost:8001/metrics
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Prometheus targets
–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:9090/targets  
`fastapi-log-analyzer` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **UP** ‚úÖ

### 3. –û—Ç–∫—Ä—ã—Ç—å Grafana
http://localhost:3000 (admin/admin)  
–î–∞—à–±–æ—Ä–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω

### 4. –¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8001
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ ZIP —Ñ–∞–π–ª —Å –ª–æ–≥–∞–º–∏
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ Grafana

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã PromQL –∑–∞–ø—Ä–æ—Å–æ–≤

```promql
# Request Rate
rate(http_requests_total[5m])

# P95 Latency
histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))

# Total Records Processed
sum(log_records_processed_total)

# Memory Usage
memory_usage_bytes{type="rss"}

# Anomalies by Model
sum by (model_type) (anomalies_detected_total)
```

---

## üêõ Troubleshooting

**Prometheus –Ω–µ –≤–∏–¥–∏—Ç FastAPI:**
```bash
docker-compose ps
docker logs prometheus
```

**Grafana –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ:**
1. Configuration ‚Üí Data Sources ‚Üí Prometheus
2. –ù–∞–∂–∞—Ç—å "Test"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë:**
```bash
docker-compose restart
```

---

## üì¶ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```
‚îú‚îÄ‚îÄ metrics.py                           # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
‚îú‚îÄ‚îÄ prometheus.yml                       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îú‚îÄ‚îÄ grafana/
‚îÇ   ‚îú‚îÄ‚îÄ provisioning/                    # –ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ datasources/prometheus.yml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboards/default.yml
‚îÇ   ‚îî‚îÄ‚îÄ dashboards/
‚îÇ       ‚îî‚îÄ‚îÄ logs-analysis.json          # –î–∞—à–±–æ—Ä–¥
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-ready  
**–í–µ—Ä—Å–∏—è:** 2.1.0  
**–î–∞—Ç–∞:** 22.10.2025

---

**Quick Links:**
- üìä [Full Guide](MONITORING_GUIDE.md)
- ‚ö° [Quick Start](MONITORING_QUICKSTART.md)
- üìù [Changes](MONITORING_CHANGES.md)
- üíª [Commands](MONITORING_COMMANDS.txt)


